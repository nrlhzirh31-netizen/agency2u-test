"use strict";(self["webpackChunktm_agent_management_system_admin"]=self["webpackChunktm_agent_management_system_admin"]||[]).push([[4032],{120:function(e,t,s){s.d(t,{Z:function(){return p}});var i=s(2240),n=s(573),a=s(7069),l=s(144),o=l.Z.extend({name:"rippleable",directives:{ripple:a.Z},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.ripple?(e.staticClass="v-input--selection-controls__ripple",e.directives=e.directives||[],e.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",e)):null}}}),r=s(6174),c=s(7678);function d(e){e.preventDefault()}var h=(0,c.Z)(n.Z,o,r.Z).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const e=this.value,t=this.internalValue;return this.isMultiple?!!Array.isArray(t)&&t.some((t=>this.valueComparator(t,e))):void 0===this.trueValue||void 0===this.falseValue?e?this.valueComparator(e,t):Boolean(t):this.valueComparator(t,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(e){this.lazyValue=e,this.hasColor=e}},methods:{genLabel(){const e=n.Z.options.methods.genLabel.call(this);return e?(e.data.on={click:d},e):e},genInput(e,t){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:e,type:e},t),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:d},ref:"input"})},onClick(e){this.onChange(),this.$emit("click",e)},onChange(){if(!this.isInteractive)return;const e=this.value;let t=this.internalValue;if(this.isMultiple){Array.isArray(t)||(t=[]);const s=t.length;t=t.filter((t=>!this.valueComparator(t,e))),t.length===s&&t.push(e)}else t=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(t,this.trueValue)?this.falseValue:this.trueValue:e?this.valueComparator(t,e)?null:e:!t;this.validate(!0,t),this.internalValue=t,this.hasColor=t},onFocus(e){this.isFocused=!0,this.$emit("focus",e)},onBlur(e){this.isFocused=!1,this.$emit("blur",e)},onKeydown(e){}}}),p=h.extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data(){return{inputIndeterminate:this.indeterminate}},computed:{classes(){return{...n.Z.options.computed.classes.call(this),"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate}},computedIcon(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate(e){this.$nextTick((()=>this.inputIndeterminate=e))},inputIndeterminate(e){this.$emit("update:indeterminate",e)},isActive(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox(){const{title:e,...t}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(i.Z,this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",{...t,"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()}),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot(){return[this.genCheckbox(),this.genLabel()]}}})},255:function(e,t,s){var i=s(3037),n=s(4712),a=s(5352),l=s(7678);t.Z=(0,l.Z)((0,i.d)("expansionPanels","v-expansion-panel","v-expansion-panels"),(0,n.J)("expansionPanel",!0)).extend({name:"v-expansion-panel",props:{disabled:Boolean,readonly:Boolean},data(){return{content:null,header:null,nextIsActive:!1}},computed:{classes(){return{"v-expansion-panel--active":this.isActive,"v-expansion-panel--next-active":this.nextIsActive,"v-expansion-panel--disabled":this.isDisabled,...this.groupClasses}},isDisabled(){return this.expansionPanels.disabled||this.disabled},isReadonly(){return this.expansionPanels.readonly||this.readonly}},methods:{registerContent(e){this.content=e},unregisterContent(){this.content=null},registerHeader(e){this.header=e,e.$on("click",this.onClick)},unregisterHeader(){this.header=null},onClick(e){e.detail&&this.header.$el.blur(),this.$emit("click",e),this.isReadonly||this.isDisabled||this.toggle()},toggle(){this.$nextTick((()=>this.$emit("change")))}},render(e){return e("div",{staticClass:"v-expansion-panel",class:this.classes,attrs:{"aria-expanded":String(this.isActive)}},(0,a.z9)(this))}})},2348:function(e,t,s){var i=s(7394),n=s(8223),a=s(6878),l=s(4712),o=s(5352),r=s(7678);const c=(0,r.Z)(n.Z,a.Z,(0,l.f)("expansionPanel","v-expansion-panel-content","v-expansion-panel"));t.Z=c.extend().extend({name:"v-expansion-panel-content",data:()=>({isActive:!1}),computed:{parentIsActive(){return this.expansionPanel.isActive}},watch:{parentIsActive:{immediate:!0,handler(e,t){e&&(this.isBooted=!0),null==t?this.isActive=e:this.$nextTick((()=>this.isActive=e))}}},created(){this.expansionPanel.registerContent(this)},beforeDestroy(){this.expansionPanel.unregisterContent()},render(e){return e(i.Fx,this.showLazyContent((()=>[e("div",this.setBackgroundColor(this.color,{staticClass:"v-expansion-panel-content",directives:[{name:"show",value:this.isActive}]}),[e("div",{class:"v-expansion-panel-content__wrap"},(0,o.z9)(this))])])))}})},400:function(e,t,s){var i=s(7394),n=s(2240),a=s(6878),l=s(4712),o=s(7069),r=s(5352),c=s(7678);const d=(0,c.Z)(a.Z,(0,l.f)("expansionPanel","v-expansion-panel-header","v-expansion-panel"));t.Z=d.extend().extend({name:"v-expansion-panel-header",directives:{ripple:o.Z},props:{disableIconRotate:Boolean,expandIcon:{type:String,default:"$expand"},hideActions:Boolean,ripple:{type:[Boolean,Object],default:!1}},data:()=>({hasMousedown:!1}),computed:{classes(){return{"v-expansion-panel-header--active":this.isActive,"v-expansion-panel-header--mousedown":this.hasMousedown}},isActive(){return this.expansionPanel.isActive},isDisabled(){return this.expansionPanel.isDisabled},isReadonly(){return this.expansionPanel.isReadonly}},created(){this.expansionPanel.registerHeader(this)},beforeDestroy(){this.expansionPanel.unregisterHeader()},methods:{onClick(e){this.$emit("click",e)},genIcon(){const e=(0,r.z9)(this,"actions")||[this.$createElement(n.Z,this.expandIcon)];return this.$createElement(i.Z5,[this.$createElement("div",{staticClass:"v-expansion-panel-header__icon",class:{"v-expansion-panel-header__icon--disable-rotate":this.disableIconRotate},directives:[{name:"show",value:!this.isDisabled}]},e)])}},render(e){return e("button",this.setBackgroundColor(this.color,{staticClass:"v-expansion-panel-header",class:this.classes,attrs:{tabindex:this.isDisabled?-1:null,type:"button","aria-expanded":this.isActive},directives:[{name:"ripple",value:this.ripple}],on:{...this.$listeners,click:this.onClick,mousedown:()=>this.hasMousedown=!0,mouseup:()=>this.hasMousedown=!1}}),[(0,r.z9)(this,"default",{open:this.isActive},!0),this.hideActions||this.genIcon()])}})},1214:function(e,t,s){s.d(t,{Z:function(){return a}});var i=s(3385),n=s(4101),a=i.y.extend({name:"v-expansion-panels",provide(){return{expansionPanels:this}},props:{accordion:Boolean,disabled:Boolean,flat:Boolean,hover:Boolean,focusable:Boolean,inset:Boolean,popout:Boolean,readonly:Boolean,tile:Boolean},computed:{classes(){return{...i.y.options.computed.classes.call(this),"v-expansion-panels":!0,"v-expansion-panels--accordion":this.accordion,"v-expansion-panels--flat":this.flat,"v-expansion-panels--hover":this.hover,"v-expansion-panels--focusable":this.focusable,"v-expansion-panels--inset":this.inset,"v-expansion-panels--popout":this.popout,"v-expansion-panels--tile":this.tile}}},created(){this.$attrs.hasOwnProperty("expand")&&(0,n.fK)("expand","multiple",this),Array.isArray(this.value)&&this.value.length>0&&"boolean"===typeof this.value[0]&&(0,n.fK)(':value="[true, false, true]"',':value="[0, 2]"',this)},methods:{updateItem(e,t){const s=this.getValue(e,t),i=this.getValue(e,t+1);e.isActive=this.toggleMethod(s),e.nextIsActive=this.toggleMethod(i)}}})},4032:function(e,t,s){s.r(t),s.d(t,{default:function(){return I}});var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("app-breadcrumb-button",{attrs:{breadcrumbs:e.breadcrumbs}}),s("v-row",{staticClass:"pa-4",attrs:{"no-gutters":""}},[s("app-section-title",{staticClass:"text-uppercase",attrs:{title:e.$t("label.createRole")}})],1),s("div",{staticClass:"mx-4"},[s("v-form",{ref:"createForm"},[s("app-section-card",{staticClass:"pt-6"},[s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{staticClass:"pb-3"},[s("div",{staticClass:"pr-15"},[s("app-form-field",{attrs:{label:e.$t("label.roleName"),placeholder:e.$t("label.roleName"),rules:e.$validators.requiredValidCharacterExtended(),fieldWidth:"100%"},model:{value:e.data.roleName,callback:function(t){e.$set(e.data,"roleName","string"===typeof t?t.trim():t)},expression:"data.roleName"}})],1)]),s("v-col",{staticClass:"pb-3"},[s("div",{staticClass:"pr-15"},[s("app-form-field",{attrs:{label:e.$t("label.description"),placeholder:e.$t("label.description"),rules:e.$validators.requiredValidCharacterExtended(),fieldWidth:"100%"},model:{value:e.data.description,callback:function(t){e.$set(e.data,"description","string"===typeof t?t.trim():t)},expression:"data.description"}})],1)]),s("v-row",{staticClass:"pb-3",attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"12"}},[s("v-card-title",{staticClass:"title pa-0"},[e._v(e._s(e.$t("label.permissions")))]),s("v-divider",{staticClass:"pb-2"})],1),e._l(e.permissionList,(function(t,i){return s("v-col",{key:i,staticClass:"pa-1",attrs:{cols:"12",md:"4",sm:"6"}},[s("v-expansion-panels",{key:i,attrs:{accordion:"",multiple:""},model:{value:e.openPanelIndex,callback:function(t){e.openPanelIndex=t},expression:"openPanelIndex"}},[s("v-expansion-panel",[s("v-expansion-panel-header",{staticClass:"denseHeight"},[s("v-card-title",{staticClass:"pa-0"},[s("label",{staticClass:"subtitle-2"},[e._v(e._s(i+1)+".Â "+e._s(t.moduleName))])])],1),s("v-expansion-panel-content",[s("v-row",{attrs:{"no-gutters":""}},e._l(t.permissions,(function(i,n){return s("v-col",{key:n,attrs:{cols:"12",sm:"4",md:"4"}},[s("v-checkbox",{staticClass:"ma-0 py-1 check-box-input",attrs:{label:""+i.text,value:i.value,color:"primary","hide-details":"",dense:""},on:{"!click":function(s){return s.stopPropagation(),e.toggleAllCheckbox(t.allPermissions,i.value)}},model:{value:e.selectedPermission,callback:function(t){e.selectedPermission=t},expression:"selectedPermission"}})],1)})),1)],1)],1)],1)],1)}))],2)],1)],1),s("v-row",{staticClass:"pa-4",attrs:{"no-gutters":""}},[s("v-col",{staticClass:"text-right",attrs:{cols:"12"}},[e.accessCreate?s("app-button",{attrs:{text:e.$t("button.create"),action:e.createRole,color:"primary",icon:"mdi-plus"}}):e._e()],1)],1)],1)],1)],1)},n=[],a=s(1533),l=s(9257),o=s(5174),r=s(1860),c=s(8409),d={name:"RoleCreate",components:{},beforeRouteEnter(e,t,s){s((e=>{let t=l.kJ.getAllModules(),s=l.kJ.getAllActions(t.ACCESS_MATRIX);e.accessCreate=l.kJ.isAuthorizedAction(t.ACCESS_MATRIX,s.CREATE)}))},beforeRouteLeave(e,t,s){e.name!=a.ROUTE_NAME.ROLE_LIST&&l.UL.clearSearch(a.SESSION.ROLE_SEARCH),s()},props:{},data(){return{accessCreate:!1,breadcrumbs:[{text:l.Rl.getMessage("button.back"),disabled:!1,to:{name:a.ROUTE_NAME.ROLE_LIST},exact:!0}],data:{roleName:"",description:"",permissions:[]},openPanelIndex:[],selectedAllPermissions:[],selectedPermission:[]}},created(){this.getPermissionList()},mounted(){},computed:{permissionList(){return this.$store.state.lookup.permissionList}},watch:{permissionList(){this.permissionList.length>0&&this.expandAllPanels()}},methods:{getPermissionList(){this.$store.dispatch(`${r.Hz}`)},createRole(){if(0==this.selectedPermission.length){let e=l.VH.getValidationErrorMessageDialog(l.Rl.getMessage("error.requiredPermission"),(()=>{this.$store.dispatch(`${c.jA}`,e)}));this.$store.dispatch(`${c.PP}`,e)}else if(this.$refs.createForm.validate()){let e=this.permissionList;for(let s=0;s<e.length;s++){let t=e[s].permissions;for(let e=0;e<t.length;e++)for(let s=0;s<this.selectedPermission.length;s++)this.selectedPermission[s]===t[e].value&&this.data.permissions.push({id:this.selectedPermission[s],action:t[e].text,description:t[e].text})}let t={name:this.data.roleName,description:this.data.description,permissions:[...new Set(this.data.permissions)]};this.$store.dispatch(`${o.wx}`,{data:t})}},expandAllPanels(){this.openPanelIndex=[...Array(this.permissionList.length).keys()].map(((e,t)=>t))},toggleAllCheckbox(e,t){let s=e.split(",");if(t)for(let i=0;i<s.length;i++){if(!this.selectedPermission.includes(s[i])){this.selectedAllPermissions.includes(e)&&this.selectedAllPermissions.splice(this.selectedAllPermissions.indexOf(e),1);break}this.selectedAllPermissions.includes(e)||this.selectedAllPermissions.push(e)}else if(this.selectedAllPermissions.includes(e))for(let i=0;i<s.length;i++)this.selectedPermission.includes(s[i])||this.selectedPermission.push(s[i]);else for(let i=0;i<s.length;i++)this.selectedPermission.includes(s[i])&&this.selectedPermission.splice(this.selectedPermission.indexOf(s[i]),1)}},beforeDestroy(){}},h=d,p=s(1001),u=s(3453),m=s.n(u),v=s(4886),x=s(120),g=s(266),b=s(9223),f=s(255),C=s(2348),A=s(400),k=s(1214),P=s(5005),y=s(1713),$=(0,p.Z)(h,i,n,!1,null,"d6d9ccaa",null),I=$.exports;m()($,{VCardTitle:v.EB,VCheckbox:x.Z,VCol:g.Z,VDivider:b.Z,VExpansionPanel:f.Z,VExpansionPanelContent:C.Z,VExpansionPanelHeader:A.Z,VExpansionPanels:k.Z,VForm:P.Z,VRow:y.Z})}}]);
//# sourceMappingURL=4032.8a948f6a.js.map
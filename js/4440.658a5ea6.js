(self["webpackChunktm_agent_management_system_admin"]=self["webpackChunktm_agent_management_system_admin"]||[]).push([[4440],{9765:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return x}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("app-section-card",[s("v-row",{staticClass:"pa-4",attrs:{"no-gutters":""}},[s("v-col",{staticClass:"text-left",attrs:{cols:"auto"}},[s("app-section-title",{staticClass:"font-weight-bold text-uppercase d-inline",attrs:{title:t.$t("label.agent")}})],1),s("v-spacer"),s("v-col",{staticClass:"text-right",attrs:{cols:"auto"}},[s("v-form",{ref:"searchForm",staticClass:"search-form-field-set d-inline-block"},[s("app-search-form-field",{attrs:{placeholder:t.$t("label.agentId")},model:{value:t.searchCriteria.agentId,callback:function(e){t.$set(t.searchCriteria,"agentId","string"===typeof e?e.trim():e)},expression:"searchCriteria.agentId"}}),t.accessView?s("v-btn",{staticClass:"search-button",attrs:{elevation:"0",color:"summerSky",tile:"",height:"40","min-width":"auto"},on:{click:function(e){return t.searchListing()}}},[s("v-icon",{attrs:{dense:"",color:"black"}},[t._v("mdi-magnify")])],1):t._e()],1),t.accessView?s("app-button",{directives:[{name:"ripple",rawName:"v-ripple",value:!1,expression:"false"}],staticClass:"d-inline-block summerSky--text text-caption button-link mr-2",attrs:{text:t.$t("button.reset"),action:t.resetSearchCriteria,color:"transparent",icon:"$resetIcon"}}):t._e(),t.accessCreate?s("app-button",{staticClass:"d-inline-block ml-2",attrs:{text:t.$t("button.add"),action:t.toCreatePage,icon:"mdi-plus"}}):t._e()],1),s("v-col",{attrs:{cols:"12"}},[s("v-row",[s("v-col",[s("v-data-table",{staticClass:"app-table-card",attrs:{headers:t.tableHeaders,items:t.tableRowsFiltered,"no-data-text":t.$t("message.noRecordFound"),"hide-default-footer":"","disable-sort":""},scopedSlots:t._u([{key:"item",fn:function(e){return[s("tr",[s("td",{staticClass:"text-caption font-weight-medium"},[t._v(t._s(e.item.email))]),s("td",{staticClass:"text-caption font-weight-medium"},[t._v(t._s(e.item.createdAt))]),s("td",{staticClass:"text-caption font-weight-medium"},[t._v(t._s(e.item.code))]),s("td",{staticClass:"text-caption font-weight-medium"},[t._v(t._s(e.item.name))]),s("td",{staticClass:"text-caption font-weight-medium"},[t._v(t._s(e.item.phone))]),s("td",{staticClass:"text-caption font-weight-medium"},[t._v(t._s(e.item.nric))]),s("td",{staticClass:"text-caption font-weight-medium"},[t._v(t._s(e.item.bankAccountNumber))]),s("td",{staticClass:"text-caption font-weight-medium"},[t._v(t._s(e.item.referredBy))]),s("td",[s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"auto"}},[t.accessView||t.accessEdit?s("v-icon",{staticClass:"px-1",attrs:{size:"25",color:"secondary",dense:""},on:{click:function(s){return t.toDetailsPage(e.item.id)}}},[t._v("$settingsIcon")]):t._e()],1),s("v-col",{attrs:{cols:"auto"}},[t.accessDelete?s("v-icon",{staticClass:"px-1",attrs:{size:"25",color:"red",dense:""},on:{click:function(s){return t.submitConfirmation(e.item.id)}}},[t._v("$deleteIcon")]):t._e()],1)],1)],1)])]}},{key:"footer",fn:function(){return[s("app-pagination",{attrs:{pagination:t.clientSidePagination,clientSidePagination:!0}})]},proxy:!0}])})],1)],1)],1)],1)],1)],1)},i=[],r=s(1533),n=s(9257),o=s(1386),c=s(8409),l={name:"AgentListing",components:{},beforeRouteEnter(t,e,s){s((t=>{let e=n.kJ.getAllModules(),s=n.kJ.getAllActions(e.user);t.accessView=n.kJ.isAuthorizedAction(e.user,s.read),t.accessCreate=n.kJ.isAuthorizedAction(e.user,s.create),t.accessEdit=n.kJ.isAuthorizedAction(e.user,s.update),t.accessDelete=n.kJ.isAuthorizedAction(e.user,s.delete)}))},beforeRouteLeave(t,e,s){t.name!=r.ROUTE_NAME.USER_CREATE&&t.name!=r.ROUTE_NAME.USER_DETAILS&&n.UL.clearSearch(r.SESSION.USER_SEARCH),s()},props:{},data(){return{accessView:!1,accessEdit:!1,accessCreate:!1,accessDelete:!1,searchCriteria:{agentId:r.SHARED.DEFAULT_ALL_VALUE_STR},tableRowsFiltered:[],tableHeaders:[{text:n.Rl.getMessage("label.email"),class:"caption"},{text:n.Rl.getMessage("label.createdAt"),class:"caption"},{text:n.Rl.getMessage("label.code"),class:"caption"},{text:n.Rl.getMessage("label.name"),class:"caption"},{text:n.Rl.getMessage("label.phone"),class:"caption"},{text:n.Rl.getMessage("label.nric"),class:"caption"},{text:n.Rl.getMessage("label.bankAccountNumber"),class:"caption"},{text:n.Rl.getMessage("label.referredBy"),class:"caption"},{text:n.Rl.getMessage("label.action"),class:"caption"}],clientSidePagination:{pageNumber:0,pageSize:0,lastPage:0,tableRowsCount:0}}},created(){this.initSearchCriteria()},mounted(){},computed:{tableRows(){return this.$store.state.user.list.data},pagination(){return this.$store.state.user.list.pagination}},watch:{tableRows(){this.filterByStatus()},pagination(){this.clientSidePagination=n.VH.getClientSidePagination(r.SHARED.DEFAULT_PAGE_SIZE,this.pagination.pageNumber,this.pagination.tableRowsCount)}},methods:{initSearchCriteria(){let t=!0;n.UL.hasSearchCriteria(r.SESSION.USER_SEARCH)&&(t=!1,this.searchCriteria=n.UL.retrieveSearch(r.SESSION.USER_SEARCH)),t&&(this.searchCriteria={agentId:r.SHARED.DEFAULT_ALL_VALUE_STR}),this.getUserList(this.searchCriteria)},searchListing(){this.$refs.searchForm.validate()&&this.getUserList(this.searchCriteria)},getUserList(t){this.$store.dispatch(`${o.sm}`,{filter:t}),this.searchCriteria=t,n.UL.storeSearch(r.SESSION.USER_SEARCH,t)},filterByStatus(){this.tableRowsFiltered=this.tableRows,this.clientSidePagination=n.VH.getClientSidePagination(r.SHARED.DEFAULT_PAGE_SIZE,r.SHARED.DEFAULT_PAGE_NUMBER,this.tableRowsFiltered.length)},resetSearchCriteria(){this.searchCriteria.agentId=r.SHARED.DEFAULT_ALL_VALUE_STR,this.searchListing()},toDetailsPage(t){let e=n.UL.retrieveSearch(r.SESSION.USER_SEARCH);e.selectedRecordId=t,n.UL.storeSearch(r.SESSION.USER_SEARCH,e),this.$router.push({name:r.ROUTE_NAME.AGENT_DETAILS})},toCreatePage(){this.$router.push({name:r.ROUTE_NAME.AGENT_CREATE})},deleteItem(t){this.$store.dispatch(o.Id,{id:t})},submitConfirmation(t){let e={messageTitle:n.Rl.getMessage("label.delete"),messages:[n.Rl.getMessage("message.confirmDelete")],buttons:[{title:n.Rl.getMessage("button.cancel"),action:()=>{this.$store.dispatch(`${c.jA}`,e)}},{title:n.Rl.getMessage("button.ok"),action:()=>{this.$store.dispatch(`${c.jA}`,e),this.deleteItem(t)}}],type:this.$const.DIALOG_TYPE.CONFIRMATION};this.$store.dispatch(`${c.PP}`,e)}},beforeDestroy(){}},d=l,u=s(1001),h=s(3453),g=s.n(h),p=s(4562),m=s(266),S=s(3863),_=s(5005),E=s(4324),R=s(1713),A=s(3687),C=s(6392),b=s.n(C),f=s(7069),v=(0,u.Z)(d,a,i,!1,null,"4687e2a0",null),x=v.exports;g()(v,{VBtn:p.Z,VCol:m.Z,VDataTable:S.Z,VForm:_.Z,VIcon:E.Z,VRow:R.Z,VSpacer:A.Z}),b()(v,{Ripple:f.Z})},6392:function(t){t.exports=function(t,e){var s="function"===typeof t.exports?t.exports.extendOptions:t.options;for(var a in"function"===typeof t.exports&&(s.directives=t.exports.options.directives),s.directives=s.directives||{},e)s.directives[a]=s.directives[a]||e[a]}}}]);
//# sourceMappingURL=4440.658a5ea6.js.map